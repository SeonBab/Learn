# 형변환(Type Conversion)

하나의 타입을 다른 타입으로 바꾸는 행위를 형변환이라하며 캐스팅(Casting)이라고 부르기도 합니다. 형번환을 하는 이유는 다른 타입끼리의 연산은 우선 피연산자들을 모두 같은 타입으로 만든 후에 수행되기 때문입니다.

다음과 같은 경우에 자동으로 타입 변환을 수행합니다.
1. 다른 타입끼리의 대입, 산술 연산 시
2. 함수에 인수를 전달할 때

표현 범위가 좁은 타입에서 표현 범위가 더욱 넓은 타입으로의 타입 변환은 큰 문제가 되지 않지만, 반대의 경우 즉 표현 범위가 좁은 타입으로의 형변환은 데이터의 손실이 발생합니다.

형변환을 하는 과정에서 암시적(implicit)또는 명시적(explicit)으로 자료의 형식을 변환하는데, 잘못된 형변환은 시스템 전반에 영향을 끼치기 때문에 주의해야합니다.

# 암시적 타입 변환(자동 타입 변환)

대입 연산이나 산술 연산에서 컴파일러가 자동으로 수행해주는 타입 변환을 가리킵니다.
대입 연산 시 연산자의 오른쪽에 존재하는 데이터의 타입이 연산자의 왼쪽에 존재하는 데이터의 타입으로 암시적 타입 변환이 진행됩니다. 산술 연산시에는 데이터의 손실이 최소화되는 방향으로 암시적 타입 변환이 진행됩니다.

```
int num1 = 3.1415;
double num2 = 5;
```

num1의 연산이 수행된다면 int형에 실수를 대입하므로 소수 부분이 자동으로 삭제되어 데이터의 손실을 발생합니다.
num2의 연산이 수행된다면 범위가 큰 double형에 상대적으로 범위가 작은 int형 데이터를 대입하므로 문제가 되지 않습니다.

```
double num1 = 5 + 3.14;
double num2 = 5.0f + 3.14;
```

num1의 연산은 int형과 double형 데이터의 산술 연산입니다. 데이터의 손실이 최소화되도록 int형 데이터가 double형으로 자동 타입 변환됩니다.

num2의 연산은 float형과 double형 데이터의 산술 연산입니다. 마찬가지로 데이터의 손실이 최소화되도록 float형 데이터가 double형으로 자동 타입 변환됩니다.

# 명시적 타입 변환(강제 타입 변환)

사용자가 타입 캐스트(cast) 연산자를 사용하여 강제적으로 수행하는 타입 변환을 가리킵니다.

C 스타일의 명시적 타입 변환은 두가지가 있습니다.
```
double num1 = 3.1415;
int num2 = (int)d;
int num3 = int(d);
```
이렇게 형변환 하는 방식을 C++에서는 C 스타일 형변환(캐스팅) 혹은 오래된 형변환이라고 하며, 아직까지 사용되고 있지만 C++형변환을 위한 4가지의 연산자가 따로 제공됩니다.

## static_cast

static(정적) 캐스트 연산자입니다. 연산자를 통해 형변환을 하면 컴파일(정적) 타임에 형변환이 가능한지 검사합니다.

기본 자료형간의 형변환도 허용하며, 최대한 값을 유지합니다.
상속 관계에 있는 클래스 타입의 형변환을 허용합니다. 부모를 자식으로 형변환 하는것을 다운캐스팅이라 하는데 이때 부모는 자식 클래스의 멤버를 가지고 있지 않기 때문에 크래시가 날 수 있어 안전하지 않습니다.

다른 형변환 연산자중 가장 사용빈도가 높습니다.

## dynamic cast

컴파일 시점이 아닌 런타임시 형변환을 검사하여 형변환을 보다 안전하게 처리합니다.

포인터 또는 참조형을 캐스팅 할 때만 사용이 가능합니다. 정확하게는 부모 클래스와 자식 클래스간의 변환에 사용됩니다.

하나 이상의 virtual 함수가 존재해야하며, 호환되지 않는 자식형으로 캐스팅하려하면 NULL을 반환합니다(다운 캐스팅 SAFE)

실패시 0을 반환합니다.

RTTI라는 기능 덕분에 사용 가능한데 성능을 중요시하는 C++에서 속도를 저하시키며, 용량이 커지는 문제가 있어 끄는게 일반적이라 사용빈도가 낮습니다.

## const cast

이 형변환 연산자는 다른 자료형으로 바꿀 수는 없지만 const 성질을 제거하고 싶을 때 사용합니다.

const가 가진 의미인 객체가 변하지 말아야한다는 작성자의 의도를 다른사람에게 알려주는 수단 중 하나가 사라지므로 const속성을 제거하는건 좋지 않아 특별한 상황이 아니라면 사용하지 않습니다.

## reinterpret_cast

reinterpret(재해석) 캐스트 연산자입니다. 일반적으로 허용하지 않는 형변환을 강제적(무조건)으로 형변환할 때 사용합니다.

포인터/참조와 관련된 형변환만 지원하며, 연관없는 두 포인터 형 사이의 변환을 허용합니다.
